<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
        <link rel="icon" type="image/png" href="{{ asset('build/images/favicon32.png') }}"/>
        <title>
            {% block title %}Partake{% endblock %}
        </title>
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}
    </head>
    <body>
    <div class="ptk-loaderContainer loader-hidden" id="ptk-loaderContainer">
        <div class="loaderContainer">
            <div class="item item-1"></div>
            <div class="item item-2"></div>
            <div class="item item-3"></div>
            <div class="item item-4"></div>
        </div>
    </div>
        <div class="ptk-stickyContainer">
            <div class="ptk-navbarContainer">
                {% include '/_includes/_navbar.html.twig' %}
            </div>
        </div>
            <div class="ptk-headerContainer">
                <div class="background">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                {% block header %}{% endblock %}
            </div>
            <div class="ptk-flashMessagesContainer">
                {% for category, messages in app.flashes %}
                    {% for message in messages %}
                        <div class="alert ptk-flashMessages alert-{{ category }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endfor %}
            </div>
            <div class="ptk-filtersContainer">
                {% block filters %}{% endblock %}
            </div>
            <div class="ptk-underfiltersContainer">
                {% block underFilters %}{% endblock %}
            </div>

        <div class="ptk-modalContainer">
            {% block modal %}{% endblock %}
        </div>
        <div class="ptk-bodyContainer">
            {% block body %}{% endblock %}
        </div>
        <script>
            let ptkClicked = document.querySelectorAll(".ptk-loader");
            let ptkCards = document.querySelectorAll(".ptk-cardsLink");
            let ptkBtns = document.querySelectorAll(".ptk-bttns");
            let ptksmlBtns = document.querySelectorAll(".ptk-smlBttns");
            const preloader = document.getElementById('ptk-loaderContainer');
            // ----------- flash messages -----------------
            let allFlashMessages = document.querySelectorAll(".ptk-flashMessages");
            function fadeOutEffect() {

                allFlashMessages.forEach((msgs, index) => {// index will be current button index

                    let fadeEffect = setInterval(function () {
                        if (!msgs.style.opacity) {
                            msgs.style.opacity = 1;
                        }
                        if (msgs.style.opacity > 0) {
                            msgs.style.opacity = 0;
                        }
                    }, 3500);
                })
            }

            // ----------- loader -----------------
            ptkBtns.forEach((clicked, index) => {
                clicked.addEventListener("click", function(e) {
                    console.log(clicked);
                    preloader.classList.remove('loader-hidden');
                });
            })
            ptksmlBtns.forEach((clicked, index) => {
                clicked.addEventListener("click", function(e) {
                    console.log(clicked);
                    preloader.classList.remove('loader-hidden');
                });
            })
            ptkCards.forEach((clicked, index) => {
                clicked.addEventListener("click", function(e) {
                    console.log(clicked);
                    preloader.classList.remove('loader-hidden');
                });
            })
            ptkClicked.forEach((clicked, index) => {
                clicked.addEventListener("click", function(e) {
                    console.log(clicked);
                    preloader.classList.remove('loader-hidden');
                });
            })

            function loader ()
            {
                preloader.classList.remove('loader-hidden');
            }

            window.onload = fadeOutEffect;
        </script>
        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
    </body>
</html>
