<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" href="{{ asset('build/images/favicon32.png') }}"/>
    <title>
        {% block title %}Partake - Admin{% endblock %}
    </title>
    {% block stylesheets %}
        {{ encore_entry_link_tags('app') }}
    {% endblock %}
</head>
<body>
    <div class="ptk-stickyContainer">
        <div class="ptk-navbarContainer">
            {% include '/_includes/_navbar.html.twig' %}
        </div>
        <div class="ptk-adminHeaderContainer">
            <h1 class="ptk-adminHeaderTitle">Admin</h1>
        </div>
        <div class="ptk-adminSideMenuContainer">
            <a href="{{ path('app_admin_user_new') }}" class="ptk-SideMenuLink">Add User</a>
            <a href="{{ path('app_admin_user_list') }}" class="ptk-SideMenuLink">Users</a>
            <a href="{{ path('app_admin_project_list') }}" class="ptk-SideMenuLink">Projects</a>
            <a href="{{ path('app_admin_idea_list') }}" class="ptk-SideMenuLink">Ideas</a>
            <a href="{{ path('app_admin_comment_list') }}" class="ptk-SideMenuLink">Comments</a>
            <a href="{{ path('app_admin_category_index') }}" class="ptk-SideMenuLink">Departments</a>
        </div>
        <div class="ptk-adminFlashMessagesContainer">
            {% for category, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert ptk-adminFlashMessages alert-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
        </div>
    </div>
        <div class="ptk-adminHeader">
            {% block adminTitle %}{% endblock %}
        </div>
    <div class="ptk-adminBlockContainer">
        <div class="ptk-adminBodyContainer">
            <div class="ptk-adminBody">
                {% block adminBody %}{% endblock %}
            </div>
        </div>
    </div>
    <div class="ptk-loaderContainer loader-hidden" id="ptk-loaderContainer">
        <div class="loaderContainer">
            <div class="item item-1"></div>
            <div class="item item-2"></div>
            <div class="item item-3"></div>
            <div class="item item-4"></div>
        </div>
    </div>
    <script>
        let flashMessages = document.querySelectorAll(".ptk-adminFlashMessages");
        function fadeOutEffect() {
            flashMessages.forEach((msgs, index) => {// index will be current button index

                let fadeEffect = setInterval(function () {
                    if (!msgs.style.opacity) {
                        msgs.style.opacity = 1;
                    }
                    if (msgs.style.opacity > 0) {
                        msgs.style.opacity = 0;
                        msgs.style.display = "none";
                    }
                }, 2500);
            })
        }
        window.onload = fadeOutEffect;

        let ptkClicked = document.querySelectorAll(".ptk-loader");
        let ptkCards = document.querySelectorAll(".ptk-cardsLink");
        let ptkBtns = document.querySelectorAll(".ptk-bttns");
        let ptksmlBtns = document.querySelectorAll(".ptk-smlBttns");
        const preloader = document.getElementById('ptk-loaderContainer');

        // ----------- loader -----------------
        ptkBtns.forEach((clicked, index) => {
            clicked.addEventListener("click", function(e) {
                console.log(clicked);
                preloader.classList.remove('loader-hidden');
            });
        })
        ptksmlBtns.forEach((clicked, index) => {
            clicked.addEventListener("click", function(e) {
                console.log(clicked);
                preloader.classList.remove('loader-hidden');
            });
        })
        ptkCards.forEach((clicked, index) => {
            clicked.addEventListener("click", function(e) {
                console.log(clicked);
                preloader.classList.remove('loader-hidden');
            });
        })
        ptkClicked.forEach((clicked, index) => {
            clicked.addEventListener("click", function(e) {
                console.log(clicked);
                preloader.classList.remove('loader-hidden');
            });
        })

        function loader ()
        {
            preloader.classList.remove('loader-hidden');
        }
    </script>
    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
    {% endblock %}
</body>
</html>
