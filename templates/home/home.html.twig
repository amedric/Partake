{% extends 'base.html.twig' %}

{% block title %}Home{% endblock %}

{% block body %}
    <div class="ptk-titleBlock">
        <div class="ptk-titleContainer">
        <h1 class="ptk-titleHeader">Projects</h1>
        </div>
    </div>

    <div class="ptk-underTitleBlock">
        <div class="ptk-createProjectContainer">
            <p id="ptk-addProjectIcon">+</p>
            <a href="{{ path('app_project_new') }}" id="ptk-createProjectBttn"> Create a project</a>
        </div>
    </div>

    <div class="ptk-filterBlock">
        <div class="ptk-filterContainer">
        <a href="{{ path('filter_by_popularity') }}" class="ptk-filterBttns">Popularity /</a>
        <a href="{{ path('filter_by_categories') }}" class="ptk-filterBttns">Categories /</a>
        <a href="{{ path('filter_by_desc') }}" class="ptk-filterBttns">Newest projects /</a>
        <a href="{{ path('filter_by_asc') }}" class="ptk-filterBttns">Oldest projects</a>
        </div>
    </div>

<div class="ptk-cardsBlock">

    {% for cat in category %}
    <div class="ptk-categoryCardsContainer">
        <div class="ptk-categorySection">
            <div class="ptk-categoryContainer">
                <h1 class="ptk-category">{{ cat.title }}</h1>
            </div>

            <div class="ptk-cardsContainer">
                {% for proj in project %}
                {% if cat.title == proj.category.title %}

                <a href="{{ path('app_project_show', {'id': proj.id}) }}" class="ptk-cardsLink">
                        <div class="ptk-cards">
                            <div class="ptk-cardTitleContainer">
                                    <h1 class="ptk-cardTitle">{{ proj.title|striptags|length > 40 ? proj.title|striptags|slice(0, 40) ~ '...' : proj.title|striptags }}</h1>
                            </div>

                            <div class="ptk-cardStatsContainer" style="background-color: {{ cat.categoryColor }}">
                                <div class="ptk-cardIconStats">
                                    <img src="{{ asset('build/images/idea.png') }}" alt="Ideas">
                                    <p class="ptk-cardStatsNo">45</p>
                                </div>
                                <div class="ptk-cardIconStats">
                                    <img src="{{ asset('build/images/view.png') }}" alt="Views">
                                    <p class="ptk-cardStatsNo">{{ proj.projectViews }}</p>
                                </div>
                            </div>
                        </div>
                </a>

                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}
